"use strict";(self.webpackChunkminimal_blog=self.webpackChunkminimal_blog||[]).push([[172],{4765:function(e,n,t){t.d(n,{F:function(){return m},Z:function(){return g}});var a=t(7294),l=t(8733),i=t(795),c=t(6920),s=t(6799),o=t(8871);var r=e=>{let{post:n}=e;return null};const p=["16px","8px","4px"].map((e=>"rgba(0, 0, 0, 0.1) 0px "+e+" "+e+" 0px"));var d=e=>{let{data:{post:n},children:t}=e;return(0,l.tZ)(c.Z,null,(0,l.tZ)(i.X6,{as:"h1",variant:"styles.h1"},n.title),(0,l.tZ)("p",{sx:{color:"secondary",mt:3,a:{color:"secondary"},fontSize:[1,1,2]}},(0,l.tZ)("time",null,n.date),n.tags&&(0,l.tZ)(a.Fragment,null," — ",(0,l.tZ)(s.Z,{tags:n.tags})),n.timeToRead&&" — ",n.timeToRead&&(0,l.tZ)("span",null,n.timeToRead," min read")),(0,l.tZ)("section",{sx:{my:5,".gatsby-resp-image-wrapper":{my:[4,4,5],borderRadius:"4px",boxShadow:p.join(", "),".gatsby-resp-image-image":{borderRadius:"4px"}},variant:"layout.content"}},t),(0,l.tZ)(r,{post:n}))};const m=e=>{var n,t,a;let{data:{post:i}}=e;return(0,l.tZ)(o.Z,{title:i.title,description:i.description?i.description:i.excerpt,image:i.banner?null===(n=i.banner)||void 0===n||null===(t=n.childImageSharp)||void 0===t||null===(a=t.resize)||void 0===a?void 0:a.src:void 0,pathname:i.slug,canonicalUrl:i.canonicalUrl})};function g(e){let{...n}=e;return a.createElement(d,n)}},6799:function(e,n,t){var a=t(8733),l=t(7294),i=t(1883),c=t(3494),s=t(9706);n.Z=e=>{let{tags:n}=e;const{tagsPath:t,basePath:o}=(0,c.Z)();return(0,a.tZ)(l.Fragment,null,n.map(((e,n)=>(0,a.tZ)(l.Fragment,{key:e.slug},!!n&&", ",(0,a.tZ)(i.Link,{sx:e=>{var n;return{...null===(n=e.styles)||void 0===n?void 0:n.a}},to:(0,s.Z)("/"+o+"/"+t+"/"+e.slug)},e.name)))))}},8871:function(e,n,t){var a=t(7294),l=t(1883),i=t(4232);n.Z=e=>{let{title:n="",description:t="",pathname:c="",image:s="",children:o=null,canonicalUrl:r=""}=e;const p=(0,i.Z)(),{siteTitle:d,siteTitleAlt:m,siteUrl:g,siteDescription:u,siteImage:A,author:b,siteLanguage:h}=p,E={title:n?n+" | "+d:m,description:t||u,url:""+g+(c||""),image:""+g+(s||A)};return a.createElement(a.Fragment,null,a.createElement("html",{lang:h}),a.createElement("title",null,E.title),a.createElement("meta",{name:"description",content:E.description}),a.createElement("meta",{name:"image",content:E.image}),a.createElement("meta",{property:"og:title",content:E.title}),a.createElement("meta",{property:"og:url",content:E.url}),a.createElement("meta",{property:"og:description",content:E.description}),a.createElement("meta",{property:"og:image",content:E.image}),a.createElement("meta",{property:"og:type",content:"website"}),a.createElement("meta",{property:"og:image:alt",content:E.description}),a.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),a.createElement("meta",{name:"twitter:title",content:E.title}),a.createElement("meta",{name:"twitter:url",content:E.url}),a.createElement("meta",{name:"twitter:description",content:E.description}),a.createElement("meta",{name:"twitter:image",content:E.image}),a.createElement("meta",{name:"twitter:image:alt",content:E.description}),a.createElement("meta",{name:"twitter:creator",content:b}),a.createElement("meta",{name:"gatsby-theme",content:"@lekoarts/gatsby-theme-minimal-blog"}),a.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:(0,l.withPrefix)("/favicon-32x32.png")}),a.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:(0,l.withPrefix)("/favicon-16x16.png")}),a.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:(0,l.withPrefix)("/apple-touch-icon.png")}),r?a.createElement("link",{rel:"canonical",href:r}):null,o)}},7078:function(e,n,t){t.r(n),t.d(n,{Head:function(){return s.F},default:function(){return o}});var a=t(7294),l=t(1151);function i(e){const n=Object.assign({h2:"h2",ol:"ol",li:"li",a:"a",h3:"h3",p:"p",pre:"pre",code:"code",span:"span",h4:"h4",strong:"strong",em:"em"},(0,l.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.h2,null,"Table of Contents"),"\n",a.createElement(n.ol,null,"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"#setting-up-the-example-project"},"Setting up the example project")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"#create-the-elastic-beanstalk-application"},"Create the Elastic Beanstalk Application")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"#create-environment-variables"},"Create Environment Variables")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"create-the-elastic-beanstalk-environment"},"Create the Elastic Beanstalk Environment")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"#deploying-changes-to-elastic-beanstalk"},"Deploying Changes to Elastic Beanstalk")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"#logs-and-debugging-tips"},"Logs and debugging tips")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"#setting-up-a-domain-name"},"Setting up a domain name")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"#setting-up-ssl"},"Setting up SSL")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"#debugging-common-problems"},"Debugging Common Problems")),"\n"),"\n",a.createElement(n.h2,null,"Setting up the example project"),"\n",a.createElement(n.h3,null,"Set Up"),"\n",a.createElement(n.p,null,"Clone the ",a.createElement(n.a,{href:"https://github.com/j0nah/deploy-example"},"repository")),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"git clone git@github.com:j0nah/deploy-example.git\n")),"\n",a.createElement(n.p,null,"Rename the example environment file so it's picked up by Next.js"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"cd deploy-example/\ncp example.env .env.local\n")),"\n",a.createElement(n.p,null,"Start the application"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"npm install\nnpm run dev\n")),"\n",a.createElement(n.p,null,"You should see something like"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"% npm run dev\n\n> deploy-example@0.1.0 dev\n> next dev\n")),"\n",a.createElement(n.p,null,"Finally, when you navigate to ",a.createElement(n.a,{href:"http://localhost:3000/"},"http://localhost:3000/"),", you should see:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"Hello, from local\n")),"\n",a.createElement(n.h3,null,"File Walkthrough"),"\n",a.createElement(n.p,null,"The three files we're going to look at for this blog post are:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"- .env\n- .env.local\n- app/page.tsx\n- app/actions.tsx\n- .ebignore\n")),"\n",a.createElement(n.p,null,a.createElement(n.code,null,".env")," defines environment variables that we plan on checking into source control. Specifically our server side environment variables ",a.createElement(n.code,null,"GREETING")," will be defined for all environments in ",a.createElement(n.code,null,".env"),"."),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"example.env")," defines the environment variable ",a.createElement(n.code,null,"NEXT_PUBLIC_GREETING_ENVIRONMENT")),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"page.tsx")," is our index page. It loads the ",a.createElement(n.code,null,"GREETING")," and ",a.createElement(n.code,null,"NEXT_PUBLIC_GREETING_ENVIRONMENT")," variables and displays a message on the index page of our application"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"actions.tsx")," is a server-side async function that fetches our server-only environment variable, ",a.createElement(n.code,null,"NEXT_PUBLIC_GREETING_ENVIRONMENT"),", for use on the index page."),"\n",a.createElement(n.p,null,a.createElement(n.code,null,".ebignore")," defines files that won't be packages and uploaded to Elastic Beanstalk. Specifically, I don't want to include the ",a.createElement(n.code,null,".env.local")," file in the package we deploy on Elastic Beanstalk."),"\n",a.createElement(n.p,null,"While bare-bones, these will be enough to demonstrate deploying the application and setting Elastic Beanstalk environment variables."),"\n",a.createElement(n.h2,null,"Create the Elastic Beanstalk Application"),"\n",a.createElement(n.h3,null,"Install ebcli"),"\n",a.createElement(n.p,null,"First, you should install the ",a.createElement(n.a,{href:"https://github.com/aws/aws-elastic-beanstalk-cli-setup#22-installupgrade-the-eb-cli"},"ebcli")," tool."),"\n",a.createElement(n.h3,null,"Build Production Artifact"),"\n",a.createElement(n.p,null,"Once that's installed, navigate to you the ",a.createElement(n.code,null,"deploy-example")," directory and get a production build of your application ready for deploy."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"cd deploy-example/\nnpm run build\n")),"\n",a.createElement(n.p,null,"We want to make sure that a production build was created. We can confirm that by locating the ",a.createElement(n.code,null,".next")," folder."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},'ls -al | grep "\\.next"\n')),"\n",a.createElement(n.p,null,"should give us something like"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"drwxr-xr-x   21 j0nah  staff     672 Aug  6 19:59 .next\n")),"\n",a.createElement(n.h3,null,"Create the Elastic Beanstalk Application"),"\n",a.createElement(n.p,null,"Start with the command ",a.createElement(n.code,null,"eb init"),". Your mileage may vary, but I typically choose the default option except for the following exceptions:"),"\n",a.createElement(n.p,null,"When it asks to create a new application. For this post, I'll create an environment called ",a.createElement(n.code,null,"deploy-example"),"."),"\n",a.createElement(n.p,null,"When it asks if I'm using Node.js, I'll choose \"Y\""),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"It appears you are using Node.js. Is this correct?\n(Y/n): Y\n")),"\n",a.createElement(n.p,null,'When it asks if I\'d like to use CodeCommit, I choose "n"'),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"Do you wish to continue with CodeCommit? (Y/n): n\n")),"\n",a.createElement(n.p,null,'When it asks to set up SSH, I choose "Y". Note, this is optional and for this post you can also just use the browser-based ec2 SSH environment if you don\'t feel like setting this up right now.'),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"Do you want to set up SSH for your instances?\n(Y/n): Y\n")),"\n",a.createElement(n.h3,null,"Create the Elastic Beanstalk Environment"),"\n",a.createElement(n.p,null,"If you don't already have an environment set up, we can set up the EB environment using the ",a.createElement(n.code,null,"ebcli")," tool."),"\n",a.createElement(n.p,null,"Note, creating this environment will automatically deploy your application, so keep that in mind."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"eb create\n")),"\n",a.createElement(n.p,null,"The following are the options that I chose:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"Enter Environment Name\n(default is deploy-example-dev): deploy-example-prod\nEnter DNS CNAME prefix\n(default is deploy-example-prod): deploy-example-prod\n\nSelect a load balancer type\n1) classic\n2) application\n3) network\n(default is 2): 2\n\nWould you like to enable Spot Fleet requests for this environment? (y/N): n\n")),"\n",a.createElement(n.p,null,"Execution of that command will give us a lot of details that will help you understand the status of our deployment. One I want to draw your attention to is the line that gives us the ",a.createElement(n.code,null,"CNAME"),". Something like"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"CNAME: deploy-example-prod.us-west-2.elasticbeanstalk.com\n")),"\n",a.createElement(n.p,null,"When your application is deployed, you can head to ",a.createElement(n.a,{href:"http://deploy-example-prod.us-west-2.elasticbeanstalk.com"},"deploy-example-prod.us-west-2.elasticbeanstalk.com"),"\nto see it in action!"),"\n",a.createElement(n.p,null,"Navigating to your Elastic Beanstalk environment should show all green if everything worked properly:\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 649px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42pWRC07bQBCGF/UYbVRKUqhUuEGF4BytwnVaDgD0LiQkQlVVlaLEduIk0ATU8EiIE9sxtnf9+Du7NUIRllAtfdqZ8c7MP7NsfaeIjZ2S4n15BRvlEtbLxcwvYvVjgXi1wNqnAtbobh5sc7+ArYPXig97L7H9dQVb+8vYPniDzb0C3u2+wOouI5Ye+bKEt58ZSjmwI6OKQ62CikQ/Qt2ooKpTTJd+FcetGmraIVFBnWI1/d/5zazje/f4CezOjnBlcVwTwwmH7wvM3AgWMbaF8qeWi/GthdHNBNdXY3XOHR8iTMCDeAHWOzuDpmvQWwbO+7/RNtuEiYbWRH/QR7vTUQxHd7DnLpwM23VyYZ1eDz9+nqDR1FRiU9OVffLrFGa3i9NGEy1qcEmqZg4Vcx9x5/MnsCAMwYUA5xwhIcgWkVAx6UdxTH4ETvf8IHgWJjvpRouU0di6AYPsttlRKvv9ASIqFlIx1SgPvugzWTUmFTJRquQPKjNkPA+ZkyQJES/E1ciWNYXn3eN/vnvfx3RmY2Y7tDsPaZqqOPN8D+ejLiaujbErcGMH8MJY/UxzCmV56lEu/wwxGFyo1XAaXRWUIyaIEacJoiSFiFOy02cVqhVla5GP96DwLyn+OaW6RjDYAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="deploy 1"\n        title=""\n        src="/static/6e8195a8f1ba72b2e8bf7d8ec9963a23/853e8/deploy-1.png"\n        srcset="/static/6e8195a8f1ba72b2e8bf7d8ec9963a23/5243c/deploy-1.png 240w,\n/static/6e8195a8f1ba72b2e8bf7d8ec9963a23/ab158/deploy-1.png 480w,\n/static/6e8195a8f1ba72b2e8bf7d8ec9963a23/853e8/deploy-1.png 649w"\n        sizes="(max-width: 649px) 100vw, 649px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.h3,null,"Bump instance type"),"\n",a.createElement(n.p,null,"While it is true that this can work with a ",a.createElement(n.code,null,"micro"),", from experience it seems that this isn't enough memory to consistently run a Next.js application. Even one this tiny. We're going to bump this to a ",a.createElement(n.code,null,"t3.small")," and I promise it will save you a lot of heartache. We can do this easy from the AWS console."),"\n",a.createElement(n.p,null,"First, head over to your Elastic Beanstalk environment in the AWS console and click the name of the environment you would like to work with\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 27.916666666666668%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHklEQVR42n2PuW7DMBBE9c8BUufD3CW/EKRIAB+SLOvgveIpY7KinTbFwywHy+GwuQqLUTssUuE2TVBawxHBOvcvdYdWuFBAcatY8mi66w2nc4vrcIM0DjHGByk9+JtZE6vjEG00JJcg0cF8vGE+vEIeXkDndzRKKQghIFljysiloDAp58r2nHMuTEZ4BlcNhCC+QeMX3PAJvfRotpI5UKLfG/K3Y4hQSiPtFxjx9DQ/6KwFrXtDW8MTF0jljtUn+FjgQ0AjfUZvIn5mQqsCXNrQLgKKlyjfcRQrTLyjnxVmQxC+sOfRmlTZz4Z3NWNDQnORDp0inITDRRJGu/JZYHYek/U4sz8a9maJQRkMPJ8WWzkygyb0QuEyCSyW8AtSDMlUJ7gyjgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="env 1"\n        title=""\n        src="/static/64e6817971bfb112e824c58615735ef8/7d769/env-1.png"\n        srcset="/static/64e6817971bfb112e824c58615735ef8/5243c/env-1.png 240w,\n/static/64e6817971bfb112e824c58615735ef8/ab158/env-1.png 480w,\n/static/64e6817971bfb112e824c58615735ef8/7d769/env-1.png 960w,\n/static/64e6817971bfb112e824c58615735ef8/87339/env-1.png 1440w,\n/static/64e6817971bfb112e824c58615735ef8/88b03/env-1.png 1920w,\n/static/64e6817971bfb112e824c58615735ef8/2593e/env-1.png 2808w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,'In the left hand panel of the next page, select "Configuration""\n',a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 652px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 130.83333333333334%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAACSklEQVR42q1VaW/aQBTM//83lSpVVdOqV9IPlZISYzAYG4M5HOML3+dO3xqcQIBy1dKwu7xl3jV+3OA/PzdZlsH2llDtBKoVQ3NiTL0UupvUMPwMIyepoVgRFmGO+TLFxEvqe/IighPnr4QpEVqOC9GI8Gvo4vdoic99G19kG596Nh4nPu7o+3eCiduehTvVxQ/CLdk+ShbeiwvIZlSTMU7INxVj6BohEXqQnsOVkb2mwdYHtrE/mDL/KMqK0okhkScjyLcI2Rp4s3J7tcamj5tN9iLP4bkuln4APwjgeh5sKofjejX43ifbUBtjbpiHI2xcJ2kKjS7rkylmszkUVYOuT6DSqgxH6MsKJtMZBFGCNta3yrE3Qh5+VjIkRUVYXeTnkgzsVNls1ibMCtyrDr5Rhz+IJn4qDr4PHHyl85hkw2/yiBocTnnPk5e7Ub006hhhYwyjCGK3hx7VaqCoqKrq/DdlOwKGiEj9IERA6zHNHSXMshyzuYEpddh4NlGW5XWEeV7UcpAHKklnRuf8OkJeMx4VXy9JdzdliqjdkfDw5wkpifxqwqYxVTMMLm1K87sojvHYaqMj9dFey6cryQiC8GQHO7LhjeHdrkEl4IOC7y9KmQ9blYYAl810ZpxFtF82RVGPJa5Bc2HVDq4i5JLxlj6SJK3TDcKI3pwYcZzApXnIa1mQ09NTJqlw2bTFLh5aAjVIgDbS8dTuoiV0CCIs2/lng3aawvZI5hz5vHn1chK1QBF1KLXyZWStwM6XzSrtrK7bpX/0fwGokPEYecrY0wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="env 2"\n        title=""\n        src="/static/ae75b30ce533e162340f9fdd195e05ce/80335/env-2.png"\n        srcset="/static/ae75b30ce533e162340f9fdd195e05ce/5243c/env-2.png 240w,\n/static/ae75b30ce533e162340f9fdd195e05ce/ab158/env-2.png 480w,\n/static/ae75b30ce533e162340f9fdd195e05ce/80335/env-2.png 652w"\n        sizes="(max-width: 652px) 100vw, 652px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,'Scroll to the "Instance, traffic, and scaling" section and select Edit\n',a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 373px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 26.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVR42k2Q3VKDMBCFef+XEqsC1lIopS3tjBZo+XemFwiSkHDMxkF78eWcZHfOJjGGYYAQAnKaIKXU6D356d8LKf7qxDhyCM7A2ADKmDFo2R8i+JsAUXTE8XTSBMEWD6aJcxzjoOphuEOSpnBdD57noywrNC1DPzBINVRoRhiMMbhrH4unF9jOEsu3FTYqjNRyXhHu9rBsBysVtFZBz5YN83GBQA3YpjdkzQ3ffYe2/ULX9b+BVd2gUBOzvERZ1ZosL7TmRaHqpBXSy1Wf1c0nrlmOpq6QJBfEivePWPcYnHP1H6O+8qyzv4eeQ1A/QX6k3rs/J/0BkWd2uNbij6wAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="scaling"\n        title=""\n        src="/static/701c98f3b4c01ac64d3d4c41d1ad01bf/18115/scaling.png"\n        srcset="/static/701c98f3b4c01ac64d3d4c41d1ad01bf/5243c/scaling.png 240w,\n/static/701c98f3b4c01ac64d3d4c41d1ad01bf/18115/scaling.png 373w"\n        sizes="(max-width: 373px) 100vw, 373px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,'Click the "x" next to ',a.createElement(n.code,null,"micro")," so that only ",a.createElement(n.code,null,"small")," remains\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 362px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 45.416666666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdklEQVR42p1S2U7DMBDM/38VDwgBDzS9QIWqR+67uRPHSYdx2hR46QOWRuudXa93x9batkWWZcjzHFVVoSgK7gsMwxn/WZofBJjpcyyWK2w2n3ib6dDnC9R1g66T6KSEEAItIfseousuoN9drRCTFdBydmRYDlw/gOP5cFwfpu3CJGeY9hiz6O8PBlwvwMGwCBOHownLcbEjr+z+aOBoWtDKsmKiD48F4+Q0Fg7jGKrzMFI2RBBFiOJkjNk87IfReEbFVI7C5GtKQ7WJSKbUckzigYD+yKUZAhVnwZ4jK0jKcD6fb/nDMPxoWDcNRw1g2BybQWUt1yPnwWQ3HovvOaLBsZtJL2qntC35iMkpHS+4FcxFD79okTQdorrDiX5IG7f9jUsaiaSV8PIGJ3Kqu9/488phLfG83uJlucGT/oEvJ4K+tWCWEu9HB4+zNR5e51jtbSx3NrxS4N6H0mo5IOXtEzJ2qJBfkbK7lF1l4hKr5HD3H34DSnKvWwBes9QAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="scaling 2"\n        title=""\n        src="/static/aba09cd3219bb92159edf75af700a8a4/5223d/scaling-2.png"\n        srcset="/static/aba09cd3219bb92159edf75af700a8a4/5243c/scaling-2.png 240w,\n/static/aba09cd3219bb92159edf75af700a8a4/5223d/scaling-2.png 362w"\n        sizes="(max-width: 362px) 100vw, 362px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,'Scroll down to the bottom of the page and click "Apply". Your application should restart now (it will take some time) on a small rather than micro instance.'),"\n",a.createElement(n.h3,null,"Create the Environment Variables"),"\n",a.createElement(n.p,null,"The following is an ascending priority list of how the environment variables are read by Next.js"),"\n",a.createElement(n.ol,null,"\n",a.createElement(n.li,null,"process.env"),"\n",a.createElement(n.li,null,".env.$(NODE_ENV).local"),"\n",a.createElement(n.li,null,".env.local (Not checked when NODE_ENV is test.)"),"\n",a.createElement(n.li,null,".env.$(NODE_ENV)"),"\n",a.createElement(n.li,null,".env"),"\n"),"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://nextjs.org/docs/pages/building-your-application/configuring/environment-variables#environment-variable-load-order"},"source: next.js")),"\n",a.createElement(n.p,null,"by precedence here, I mean that a value in ",a.createElement(n.code,null,".env")," will overwrite the same variable defined in ",a.createElement(n.code,null,".env.local")," or ",a.createElement(n.code,null,"process.env"),"."),"\n",a.createElement(n.h4,null,"Defining environment variables in Elastic Beanstalk"),"\n",a.createElement(n.p,null,"To save you from some googling, note that the variables pre-fixed with ",a.createElement(n.code,null,"NEXT_PUBLIC_")," are baked into your production build. This means that they won't change relative to the environment the application is run in. Instead, their values will be frozen based on the environment they are ",a.createElement(n.strong,null,"built")," in. This means, unless we're building on the Elastic Beanstalk environment (we aren't in this post) the only variables we can define are server-side variables, or those without the ",a.createElement(n.code,null,"NEXT_PUBLIC_")," prefix."),"\n",a.createElement(n.p,null,"Defining environment variables is fairly simple through the console."),"\n",a.createElement(n.p,null,"First, head over to your Elastic Beanstalk environment in the AWS console and click the name of the environment you would like to work with\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 27.916666666666668%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHklEQVR42n2PuW7DMBBE9c8BUufD3CW/EKRIAB+SLOvgveIpY7KinTbFwywHy+GwuQqLUTssUuE2TVBawxHBOvcvdYdWuFBAcatY8mi66w2nc4vrcIM0DjHGByk9+JtZE6vjEG00JJcg0cF8vGE+vEIeXkDndzRKKQghIFljysiloDAp58r2nHMuTEZ4BlcNhCC+QeMX3PAJvfRotpI5UKLfG/K3Y4hQSiPtFxjx9DQ/6KwFrXtDW8MTF0jljtUn+FjgQ0AjfUZvIn5mQqsCXNrQLgKKlyjfcRQrTLyjnxVmQxC+sOfRmlTZz4Z3NWNDQnORDp0inITDRRJGu/JZYHYek/U4sz8a9maJQRkMPJ8WWzkygyb0QuEyCSyW8AtSDMlUJ7gyjgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="env 1"\n        title=""\n        src="/static/64e6817971bfb112e824c58615735ef8/7d769/env-1.png"\n        srcset="/static/64e6817971bfb112e824c58615735ef8/5243c/env-1.png 240w,\n/static/64e6817971bfb112e824c58615735ef8/ab158/env-1.png 480w,\n/static/64e6817971bfb112e824c58615735ef8/7d769/env-1.png 960w,\n/static/64e6817971bfb112e824c58615735ef8/87339/env-1.png 1440w,\n/static/64e6817971bfb112e824c58615735ef8/88b03/env-1.png 1920w,\n/static/64e6817971bfb112e824c58615735ef8/2593e/env-1.png 2808w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,'In the left hand panel of the next page, select "Configuration""\n',a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 652px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 130.83333333333334%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAACSklEQVR42q1VaW/aQBTM//83lSpVVdOqV9IPlZISYzAYG4M5HOML3+dO3xqcQIBy1dKwu7xl3jV+3OA/PzdZlsH2llDtBKoVQ3NiTL0UupvUMPwMIyepoVgRFmGO+TLFxEvqe/IighPnr4QpEVqOC9GI8Gvo4vdoic99G19kG596Nh4nPu7o+3eCiduehTvVxQ/CLdk+ShbeiwvIZlSTMU7INxVj6BohEXqQnsOVkb2mwdYHtrE/mDL/KMqK0okhkScjyLcI2Rp4s3J7tcamj5tN9iLP4bkuln4APwjgeh5sKofjejX43ifbUBtjbpiHI2xcJ2kKjS7rkylmszkUVYOuT6DSqgxH6MsKJtMZBFGCNta3yrE3Qh5+VjIkRUVYXeTnkgzsVNls1ibMCtyrDr5Rhz+IJn4qDr4PHHyl85hkw2/yiBocTnnPk5e7Ub006hhhYwyjCGK3hx7VaqCoqKrq/DdlOwKGiEj9IERA6zHNHSXMshyzuYEpddh4NlGW5XWEeV7UcpAHKklnRuf8OkJeMx4VXy9JdzdliqjdkfDw5wkpifxqwqYxVTMMLm1K87sojvHYaqMj9dFey6cryQiC8GQHO7LhjeHdrkEl4IOC7y9KmQ9blYYAl810ZpxFtF82RVGPJa5Bc2HVDq4i5JLxlj6SJK3TDcKI3pwYcZzApXnIa1mQ09NTJqlw2bTFLh5aAjVIgDbS8dTuoiV0CCIs2/lng3aawvZI5hz5vHn1chK1QBF1KLXyZWStwM6XzSrtrK7bpX/0fwGokPEYecrY0wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="env 2"\n        title=""\n        src="/static/ae75b30ce533e162340f9fdd195e05ce/80335/env-2.png"\n        srcset="/static/ae75b30ce533e162340f9fdd195e05ce/5243c/env-2.png 240w,\n/static/ae75b30ce533e162340f9fdd195e05ce/ab158/env-2.png 480w,\n/static/ae75b30ce533e162340f9fdd195e05ce/80335/env-2.png 652w"\n        sizes="(max-width: 652px) 100vw, 652px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,'Scroll to the "Updates, monitoring, and logging" section and select Edit\n',a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 34.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABH0lEQVR42p1RXW+CQBDk//8rW7FVqhYUKCKiNKkiwZSPg8JBprsXqTbpUx8mu8zuzXBzWlEUaNsWXdeh73sFKeW17xTPYG7oeca1bRrI5gt1Xf9AE1WFKHrHZPKE0egBprWC5/swjDnGYx3zxRKL5SvevI2q0+kMj8RPdB1RnGJ/qYH+ZqQE4/hMyyZs28XadrDxt7AdF9ZqrYReSJR5x/VgEvc8M5SR6++wPyZIkgRnwol0NCEqpOkFwe6Aj+MJn1mGikzYqKwEypIguJaqL4qS5rVCRrslRZblOXKqHJ9W0FJOxCGKEIahIhvKZchLQeUnf+Upr5xU3G2usSOLbIMAFuXH4oL+iA80FPo9+PHu8Ren8VUGRw6Vl4bv/+Abzt4TdypiAg8AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="env 3"\n        title=""\n        src="/static/d1fef48f9a46d4c78acb3f9b33cdafd8/7d769/env-3.png"\n        srcset="/static/d1fef48f9a46d4c78acb3f9b33cdafd8/5243c/env-3.png 240w,\n/static/d1fef48f9a46d4c78acb3f9b33cdafd8/ab158/env-3.png 480w,\n/static/d1fef48f9a46d4c78acb3f9b33cdafd8/7d769/env-3.png 960w,\n/static/d1fef48f9a46d4c78acb3f9b33cdafd8/3434a/env-3.png 1068w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,'Click "Add environment property"\n',a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 26.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzklEQVR42o1Pa2/CMAzs//95wChIfTBAgmkhKU7SPFp6OJ6E2Jdpli53ti+OU4UQcDyd0XY9uv6A/vCJpmnRtJ0gxoiUEgJzzIl1RkxJatLLGWOe4dOMIUyoxMgga2GdZzg47xnjS5fecCc45yWXOmsiyzxC+4wb42QCD+QNvZjYwMZiJutwp58HCpd8GAg3bZB5o79CNixDlFLQWsMY84uJSL45Px6YpgnLsrwuL28s4KMq31XfCtttjbreCa83H6z3WK03uFy/eNCM/8YTtbCBOo8+lacAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="env 4"\n        title=""\n        src="/static/76582c1b663d09991a78c58281cbe541/7d769/env-4.png"\n        srcset="/static/76582c1b663d09991a78c58281cbe541/5243c/env-4.png 240w,\n/static/76582c1b663d09991a78c58281cbe541/ab158/env-4.png 480w,\n/static/76582c1b663d09991a78c58281cbe541/7d769/env-4.png 960w,\n/static/76582c1b663d09991a78c58281cbe541/4f7ef/env-4.png 1404w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,'For testing purposes let\'s add a "GREETING" as "Haldo"\n',a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 33.75%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABC0lEQVR42o2SXVKEMBCEOaF38ji+eQj1Cr6qsGFxIQnknyS0k6yUaJWWVH3VA0x1egYaxnqcCNaf0XYdtNbIOSOmhESaSOMna9rgY8Zvl7EWzcQFhJQQQoJLUQ2NsRWtNJxzsNRonMfiE0a9Ytv+MBRCIB869lpbj1d2gQkZds0wa9EER6pCgveBgsxVvxmeGMOiFHwIcERYVxo1kVFEO3AIQ8lcrMwuERGSkjoy4jTVl+FGhgbNZZxQGN5H9OehNpUdXlsISnwE+7PDqHutS0JFO9PGVEr9836vd+Q814kW2m85XGna9dsj5PM99PSC5vryf8zLUv+IifP6IbuOQSo65OEW7O4Gtn3CBxjRHNybZMxLAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="env 5"\n        title=""\n        src="/static/e2bcee2ce0c1c2235784cffb6b316c78/7d769/env-5.png"\n        srcset="/static/e2bcee2ce0c1c2235784cffb6b316c78/5243c/env-5.png 240w,\n/static/e2bcee2ce0c1c2235784cffb6b316c78/ab158/env-5.png 480w,\n/static/e2bcee2ce0c1c2235784cffb6b316c78/7d769/env-5.png 960w,\n/static/e2bcee2ce0c1c2235784cffb6b316c78/87339/env-5.png 1440w,\n/static/e2bcee2ce0c1c2235784cffb6b316c78/88b03/env-5.png 1920w,\n/static/e2bcee2ce0c1c2235784cffb6b316c78/968c3/env-5.png 2030w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,'Then just click "Apply" and wait for the app to reboot.'),"\n",a.createElement(n.h4,null,"It didn't work!"),"\n",a.createElement(n.p,null,'Hold on, that\'s weird. When we refreshed the page and we still see "Hello, from local" but based on the code in ',a.createElement(n.code,null,"page.tsx")," and the environment variable, we should see ",a.createElement(n.code,null,"Haldo, from local"),". This is because of the ",a.createElement(n.a,{href:"#create-environment-variables"},"priority rules"),"the Next.js environment uses for environment variables. Note, we did set the environment variable correctly but it's considered ",a.createElement(n.code,null,"process.env")," which is lower priority than the ",a.createElement(n.code,null,".env")," file. To solve this, let's rename the ",a.createElement(n.code,null,".env")," to ",a.createElement(n.code,null,"example.env")," and re-deploy."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"cd deploy-example/\nmv .env old.env\neb deploy\n")),"\n",a.createElement(n.p,null,"when the deploy is finished, you should be able to navigate back to your site and see: ",a.createElement(n.code,null,"Haldo, from local"),"."),"\n",a.createElement(n.h3,null,"Deploying Changes to Elastic Beanstalk"),"\n",a.createElement(n.p,null,"You probably caught it from the previous section, but if you want to make changes to your application, it's very simple. Let's just update the background color in our application."),"\n",a.createElement(n.p,null,"Head over to ",a.createElement(n.code,null,"page.tsx")," and append ",a.createElement(n.code,null,"bg-red-50")," to the end of the ",a.createElement(n.code,null,"className"),". It should now read something like"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"flex min-h-screen flex-col items-center justify-between p-24 bg-red-50\n")),"\n",a.createElement(n.p,null,"Next, we'll run a production build, package, and deploy our changes."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"npm run build\neb deploy\n")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 582px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 32.916666666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZElEQVR42q2RuwrAIAxF/f9PVHBqCxEXHyld6q2VFly0oB0OISQccolI3qPF6Vyh7nv7N6I3BDMQI9JLCHNCJgIbg/3hsPbzyqYQ+ZpVSiwZ0hqbUqUOC4s0x0Qddzby708Z4QJ73x116W0+2gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="deploy 2"\n        title=""\n        src="/static/3c469968376ca96d3ae07758df51a234/87b80/deploy-2.png"\n        srcset="/static/3c469968376ca96d3ae07758df51a234/5243c/deploy-2.png 240w,\n/static/3c469968376ca96d3ae07758df51a234/ab158/deploy-2.png 480w,\n/static/3c469968376ca96d3ae07758df51a234/87b80/deploy-2.png 582w"\n        sizes="(max-width: 582px) 100vw, 582px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",a.createElement(n.h2,null,"Setting up a domain name"),"\n",a.createElement(n.p,null,"I bought the cheapest domain name I could find on Namecheap. We're going to point into to AWS and then point that at our deployed Elastic Beanstalk application."),"\n",a.createElement(n.h3,null,"Point Nameservers at AWS"),"\n",a.createElement(n.p,null,'After purchasing the domain name, head over to Route 52 on AWS and click "Created hosted zone"\n',a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 577px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 17.916666666666668%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuUlEQVR42pXPS0oDQRSF4R64AichOHWB2UcS9+BaAjGQYVASnEhjIlFMd9fj3lux5be6xeggEwcf51RBHajCh4Dz/h8cLggupjOMoqprQoyI6hny20W+WUKqZ2S/Ql8fetLnPfq2odjuXlBRNCUa56iahpAftm1LzHnqefRQvXMEbDbiaXzB+uaK9XSQDdlMLqlvrym6b6gZlge7/JHyubuzP13zqH18kg6PxHKGLxeE8q7nyzm2W/IFgnAqLIFR3eIAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="domain 1"\n        title=""\n        src="/static/9041b88812d30a8c3a6e96a4736c90da/1d708/domain-1.png"\n        srcset="/static/9041b88812d30a8c3a6e96a4736c90da/5243c/domain-1.png 240w,\n/static/9041b88812d30a8c3a6e96a4736c90da/ab158/domain-1.png 480w,\n/static/9041b88812d30a8c3a6e96a4736c90da/1d708/domain-1.png 577w"\n        sizes="(max-width: 577px) 100vw, 577px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,"The only setting I'm going to add is the name\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 834px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 105.83333333333333%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAACnUlEQVR42pVVWXITMRD12SguwJm4CQXFSfhPkcRZIE7seBnPKmlGs8gz8+huyca4bAiqetXSyHrq5bU8WSyXuPp+jbv7B1zf3Iq9nU7xstygMCW0MW9DWQomZVUhyzLkeY6iyJEkCdI0BX9vu47QerQBsu7CvPu91zSw1hIhsbJn07t7/HyayfzmdorNJpKbC6WgtREorT2U9mvl1zzviLwh0gmzKjpUkUe7fsAwDBgJu90OO+cEznUCPiTzzqM7Av++IU8nVV1js00QbWPEuYapati6EdRNi8o2dFGPEcA4BoT56XB0+USXNR4XMe5nK8yjHFtFF+QWEdmtarDOK7GxaZGWTpAYh8K684Q1xe1zYyhsS575ZPfkVU8p6Drnwyf8awihpZCXyxWWqzUWr0usogTKVFKxyvIFtaAffH73GM/ELIRcGT5Qsne2FrnwxjCMctB76nN4POTbCemBsG2DrsRy+VspClvxaByDHcTTPqjgfA7Ju6IooKm6XiLOyyPI4TTUS+Ee5bDBIlZYZxpxYZDqCsq2yKsWRWlhykqEa7gNRcBOCJn4vIcU4ixvcfU4x9WPOW6eST6JwcZ00F0v6n+Zv+Jp9kx2gSwvqHv05ZBZ2KbZISM9MlJjkSjq77KBJk+Z8FBtLhp5LH1OOXchRS50lLQeb5bUs7zoqNH/AB3iduK9OqAJqIOcjsEXTwyRTe8eECUFeG7Ck6WOHgPfw+6vOHjINznKB4fAIe1vFjkdNf5ej5fARWIO0SF7k+VKxM3aY8vV/N8hRWHWOEmp9Tb0SPpEDxd09ibCfQXZlqF/Jfn7gpwB77M6GksPik5QanrhyVYmo+eLC3Dy/3B4mc+A95M0xiIqoK4/Y/HlPZ6+fsDzp3dQ3z7iF8T7WEnR9BLMAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="domain 2"\n        title=""\n        src="/static/9461d639fcc697a8dd746ec3bc98df24/7df40/domain-2.png"\n        srcset="/static/9461d639fcc697a8dd746ec3bc98df24/5243c/domain-2.png 240w,\n/static/9461d639fcc697a8dd746ec3bc98df24/ab158/domain-2.png 480w,\n/static/9461d639fcc697a8dd746ec3bc98df24/7df40/domain-2.png 834w"\n        sizes="(max-width: 834px) 100vw, 834px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,"It will bring us to the Route 52 page which has a record with the nameservers we're going to add to Namecheap\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 12.916666666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhUlEQVR42l2O7Q7CIAxFef9HnIn7M4e6qbjBQsvHldaQGE/S3HAaLpjH84UYI3LOSCnpyHnbdoTjgHNvRCJN7wN8COplbvcFy7rqjpiwt71xzoHahV9qrVosGVqBZIc5aRIzzuOIYThhnu3XEcNIWSkF/4jrxf2R7gXx1l4xTRfIp4ScCz66rOnQtb6DaQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="domain 3"\n        title=""\n        src="/static/32c9aee89ba494b9fca1b96cd4c8b2cc/7d769/domain-3.png"\n        srcset="/static/32c9aee89ba494b9fca1b96cd4c8b2cc/5243c/domain-3.png 240w,\n/static/32c9aee89ba494b9fca1b96cd4c8b2cc/ab158/domain-3.png 480w,\n/static/32c9aee89ba494b9fca1b96cd4c8b2cc/7d769/domain-3.png 960w,\n/static/32c9aee89ba494b9fca1b96cd4c8b2cc/19986/domain-3.png 1154w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,"We'll set these values on Namecheap\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 781px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 25.416666666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAArUlEQVR42n2QzQ6CMBCEef9nwVfp3XjSyoGSFCRQ+j9uK2s0ETeZ7GZ3+mXSJqUEKe/w3sPuKpWLcka5p5zxt8gDb+vYlEdqGCpwMQYryTkHH0IFRTLnH0DedV2HU9vCrcsLyAZPkL7voYqUwjzPiDFWBYIX8Vw6A6dxhBACgXZfQLNtuEn5ltYa1loYSszayMM9H3xDg/1gBwV9OWOSVzwopaXEn+mOEvI/M/AJAOyGNXK+S3cAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="domain 4"\n        title=""\n        src="/static/6464d8ce8919c5643b52b47897c3e296/f4c47/domain-4.png"\n        srcset="/static/6464d8ce8919c5643b52b47897c3e296/5243c/domain-4.png 240w,\n/static/6464d8ce8919c5643b52b47897c3e296/ab158/domain-4.png 480w,\n/static/6464d8ce8919c5643b52b47897c3e296/f4c47/domain-4.png 781w"\n        sizes="(max-width: 781px) 100vw, 781px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.h3,null,"Point Domain at Elastic Beanstalk Application"),"\n",a.createElement(n.p,null,'Back to Route 53, we\'re going to create an A record to point to the Elastic Beanstalk application. Click "Create Record" and create a new A record. Note how we have the "Alias" option selected and we\'re routing to a specific Elastic Beanstalk environment:\n',a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 57.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZElEQVR42p2Sa3KEIBCEOXHukhvkGLlDfuUI+4y6CgrKS7Qzg7q1u6lspULVVyLMDD0NoihLHE8n7A8HdF2HGCNCCH8mEo22KNSAzgwQpu/RE/M8Y5qm/N0GzzeeDc7zVJgRbduikQohJsy0kYhAKlnpbUJVXVDLFoP1cM7COkdfB2st4jgipQTvPUQll4LO+RwwUIDWBsMw3CnlTrpOw5ie9jW0McsazflwPtRxwaLpsndhZHWPbT9v9XGwUiGVxOF4QlFeIJWCIgtiHPNmyBe04H1YCD/Z9rk7wW3sdnucz1+QUlL7C3Xd5LbZm5GKT1O6zuPq8QavsV1sgVCkqihK6N5mUxm3Gh5iQKJg6wLKWoIvsKdDthex2bPBHQk2+FLX+Wd+eCo5iVQ5H9Eauyqd7nzjuLQWZrViuklOv7ApucakdIVvuSL1qtXkoSMP6fr1PzCEbDvyuoT8eMX5/QXq8w3fpH1YDKARkSEAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="domain 5"\n        title=""\n        src="/static/da0ee41ae9289da3986dfb68a698c3f0/7d769/domain-5.png"\n        srcset="/static/da0ee41ae9289da3986dfb68a698c3f0/5243c/domain-5.png 240w,\n/static/da0ee41ae9289da3986dfb68a698c3f0/ab158/domain-5.png 480w,\n/static/da0ee41ae9289da3986dfb68a698c3f0/7d769/domain-5.png 960w,\n/static/da0ee41ae9289da3986dfb68a698c3f0/d2ae1/domain-5.png 1093w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,"It likely won't work immediately. We need to wait for the DNS to propagate."),"\n",a.createElement(n.h2,null,"Debugging Common Problems"),"\n",a.createElement(n.h3,null,"My environment variable isn't working"),"\n",a.createElement(n.p,null,"If you can't seem to get your environment variable to work, check on a couple things:"),"\n",a.createElement(n.p,null,"First, make sure that it's defined properly based on the precedece described ",a.createElement(n.a,{href:"#create-the-environment-variables"},"above"),". Remember, if you've got any un-ignored ",a.createElement(n.code,null,".env")," file in the package directory, it will replace any values you defined in Elastic Beanstalk."),"\n",a.createElement(n.p,null,"Second, if you expect it to be available in the browser or client code you ",a.createElement(n.em,null,"MUST")," define the variable prefixed with ",a.createElement(n.code,null,"NEXT_PUBLIC_"),"."),"\n",a.createElement(n.h3,null,"Applying environment variables failed and put my app in an error state"),"\n",a.createElement(n.p,null,"First, please consider ",a.createElement(n.a,{href:"#bump-instance-type"},"upgrading to a small")," if you haven't. This can often solve a lot of problems."),"\n",a.createElement(n.p,null,'Another way I\'ve found to deal with it is just by "rebuilding" the environment from the environment page on the AWS console.\n',a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 596px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 140%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEeklEQVR42p1VS3PjRBAWWfi7HCg4wIGC5cKVCydqOVFUUbucl5SzeTh+x+/Ez/iZjV+yJUuyZcuy/fH12DJOKnBgqr7q7plRa6a/7h5tYhjQx2NMLQuWbR9gmCbM6ZQwMZpMYQ3u4RZ/gVf+FevqG4VN5Q18Yr2XPuc0fTzBdrtFfzBEvdFC/b6FVrtLRxbGEwNjXYcPwCi+BX7W0P3xMxS+faVQ/v4E5e9eof7DCWpE8utPoY30sXL48NhDvniH27syMrkCev0BBsMRer1HeHSo5/4AftLQfn2C0OefIP6lhvAXGvLfaIh/pSG3l5rBa9mOg9Vqhc1mi5XvY7324dF2Fwv4tF3Ph+8MgNY7oPsn8faAbUfkO/j13+HXfoMmzmS0Wm3EYnHE4gkU7+6QTN4gFPqA60gU+XwBl1cRRG9K6I0MtX/DW21EElvCWqwxcQFt7rpqw3K5xIQxmzJ2jjODTWJMEvPw8BEWCTNI3tQ0sFzM6cV/hjUWcwfu3IYmjmTYtkNHDh178DxPOen1+3DdBWbzOR2anLNVCF4aC4ZHvtNEkdFoNHB2do5MNoccrxiJxvDh/BKnpyGkUje88jURxpgpJmO9XjPmGwUZE/6wSELVCYVlGSIDBHbwwfH88QjmhiMdiVTmnxNWa3UkeZJ0OkO9hmwuj0wmh0LxFlmeOpvNI0Gi6vcNxEmc2KmbNJqt1tMrS8xkSPw6nS6azRZGo5HCI3NzOByiLzk5ENlXxHW7D2pN9ktsFal0JqmnBUF2yfZisTzERua9/aYAwdxLI/CjyUZ15WoNV+EIwtcRlXfXkZgKQTh8jWg0jgjtMNcbzd0V5afHcT04FEVNHhHynJjn6/95QskxFUPKsckynM0wZ4Al4S3G1WA+OqLPHJiS7MSE5Wpx37Fz4UKKQSuXq7sY0olstOlYHNqzuXI+pdMZHcralB/InLmXxyfW2WSkVDVpApv9kTckxBeILjHaxylI4ICsQziOICwLoQdScsy7UOgMF+cXrIwUSqUS3r//C+VyGVE2iDRzLpVMcU8I/V7/SVI/ieHAclEb2GizVdyPHNSHNprjORq6g0KbTZdrMid2Q5+h0jOU3qQeQL57NHdcaOnWCA9jC7lbniSZRf6uikSmgHypimKlTrui9EKZ1cM9sl5tdjEybQz4NAwNC33KbGeyc5jr6NAtB+VKFacM6hXz8JL5lrzJIMwGkUqLZB7GEghLLkbiKFVqO3KYAUKUyHx3omKpFRsfUXycoq67aFs+muYCremSckl7hfZ0RZtQtkfdQ9NYoDzgIRgOwW3fQmc8251Qin9XKVVWREw1B+ncF2xdhUIBGdqCZDKJZGKHBJuDVFNA6LPS26WB563YQNlkeRV5FqZspqLLkyqN41iXJ1cK4rj8vL1z5VC1H/ZFySVZkIdK8lHkwSZWe0i+/WvpBYqUUo9v8JDv9IgtSkpuOJmwQixl63xTxBbd2Zfriw7lVFKzztxV1wjgHOkzteY+WROWA8j3i/3bpG1f6DL/B8H4G/uZJs8t8oAyAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="rebuild 1"\n        title=""\n        src="/static/632e713ccd588cb8045e19ec9cedc533/8ab7a/rebuild-1.png"\n        srcset="/static/632e713ccd588cb8045e19ec9cedc533/5243c/rebuild-1.png 240w,\n/static/632e713ccd588cb8045e19ec9cedc533/ab158/rebuild-1.png 480w,\n/static/632e713ccd588cb8045e19ec9cedc533/8ab7a/rebuild-1.png 596w"\n        sizes="(max-width: 596px) 100vw, 596px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.h3,null,"My app just remains in the severe state all time time"),"\n",a.createElement(n.p,null,"First, please consider ",a.createElement(n.a,{href:"#bump-instance-type"},"upgrading to a small")," if you haven't. This can often solve a lot of problems."),"\n",a.createElement(n.p,null,"Second, check your logs. If you see something like:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"Could not find a valid build in the '.next' directory! Try building your app with 'next build' before starting the server.\n")),"\n",a.createElement(n.p,null,"then you may have forgotten to ",a.createElement(n.code,null,"npm run build")," before you ran ",a.createElement(n.code,null,"eb deploy"),"."),"\n",a.createElement(n.h3,null,"My question isn't answered"),"\n",a.createElement(n.p,null,"Can't find your error here? Leave it as a comment or email me at ",a.createElement(n.code,null,"contact@j0nah.com")," and we'll solve it together then update this post!"))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?a.createElement(n,e,a.createElement(i,e)):i(e)},s=t(4765);function o(e){return a.createElement(s.Z,e,a.createElement(c,e))}s.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-deploying-next-js-ebs-index-md-b5e2088e832b8268daa0.js.map