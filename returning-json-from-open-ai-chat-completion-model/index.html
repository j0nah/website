<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.11.0"/><meta name="description" content="Using python to return json from an openai chat completion model" data-gatsby-head="true"/><meta name="image" content="https://j0nah.com/banner.jpg" data-gatsby-head="true"/><meta property="og:title" content="Returning JSON from OpenAI Chat Completion Model | j0nah.com" data-gatsby-head="true"/><meta property="og:url" content="https://j0nah.com/returning-json-from-open-ai-chat-completion-model" data-gatsby-head="true"/><meta property="og:description" content="Using python to return json from an openai chat completion model" data-gatsby-head="true"/><meta property="og:image" content="https://j0nah.com/banner.jpg" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:image:alt" content="Using python to return json from an openai chat completion model" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="Returning JSON from OpenAI Chat Completion Model | j0nah.com" data-gatsby-head="true"/><meta name="twitter:url" content="https://j0nah.com/returning-json-from-open-ai-chat-completion-model" data-gatsby-head="true"/><meta name="twitter:description" content="Using python to return json from an openai chat completion model" data-gatsby-head="true"/><meta name="twitter:image" content="https://j0nah.com/banner.jpg" data-gatsby-head="true"/><meta name="twitter:image:alt" content="Using python to return json from an openai chat completion model" data-gatsby-head="true"/><meta name="twitter:creator" content="Jonah" data-gatsby-head="true"/><meta name="gatsby-theme" content="@lekoarts/gatsby-theme-minimal-blog" data-gatsby-head="true"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/android-chrome-512x512.png"/><link rel="alternate" type="application/rss+xml" title="j0nah.com" href="/rss.xml"/><style type="text/css">
    .header-link-icon.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .header-link-icon.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .header-link-icon svg,
    h2 .header-link-icon svg,
    h3 .header-link-icon svg,
    h4 .header-link-icon svg,
    h5 .header-link-icon svg,
    h6 .header-link-icon svg {
      visibility: hidden;
    }
    h1:hover .header-link-icon svg,
    h2:hover .header-link-icon svg,
    h3:hover .header-link-icon svg,
    h4:hover .header-link-icon svg,
    h5:hover .header-link-icon svg,
    h6:hover .header-link-icon svg,
    h1 .header-link-icon:focus svg,
    h2 .header-link-icon:focus svg,
    h3 .header-link-icon:focus svg,
    h4 .header-link-icon:focus svg,
    h5 .header-link-icon:focus svg,
    h6 .header-link-icon:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XKV351K3EY"></script><script>
      window.excludeGtagPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/do\-not\-track\/me\/too\/)$/];
      
      if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-XKV351K3EY', {"send_page_view":false});
      }
      </script><style data-emotion="css-global 6koz1s" data-gatsby-head="true">html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-light,.theme-ui-light html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;}html.theme-ui-dark,.theme-ui-dark html{--theme-ui-colors-text:#cbd5e0;--theme-ui-colors-primary:#b794f4;--theme-ui-colors-secondary:#8a9ab0;--theme-ui-colors-toggleIcon:#cbd5e0;--theme-ui-colors-background:#1A202C;--theme-ui-colors-heading:#fff;--theme-ui-colors-divide:#2d3748;--theme-ui-colors-muted:#2d3748;--theme-ui-colors-highlightLineBg:rgba(255, 255, 255, 0.1);--theme-ui-colors-plain-color:#9CDCFE;--theme-ui-colors-plain-backgroundColor:#1E1E1E;--theme-ui-colors-prolog-color:rgb(0, 0, 128);--theme-ui-colors-comment-color:rgb(106, 153, 85);--theme-ui-colors-builtin-color:rgb(86, 156, 214);--theme-ui-colors-changed-color:rgb(86, 156, 214);--theme-ui-colors-keyword-color:rgb(86, 156, 214);--theme-ui-colors-interpolation-punctuation-color:rgb(86, 156, 214);--theme-ui-colors-number-color:rgb(181, 206, 168);--theme-ui-colors-inserted-color:rgb(181, 206, 168);--theme-ui-colors-constant-color:rgb(100, 102, 149);--theme-ui-colors-attr-name-color:rgb(156, 220, 254);--theme-ui-colors-variable-color:rgb(156, 220, 254);--theme-ui-colors-deleted-color:rgb(206, 145, 120);--theme-ui-colors-string-color:rgb(206, 145, 120);--theme-ui-colors-attr-value-color:rgb(206, 145, 120);--theme-ui-colors-template-punctuation-color:rgb(206, 145, 120);--theme-ui-colors-selector-color:rgb(215, 186, 125);--theme-ui-colors-tag-color:rgb(86, 156, 214);--theme-ui-colors-punctuation-color:#808080;--theme-ui-colors-operator-color:rgb(212, 212, 212);--theme-ui-colors-function-color:rgb(220, 220, 170);--theme-ui-colors-class-name-color:rgb(78, 201, 176);--theme-ui-colors-char-color:rgb(209, 105, 105);}</style><style data-emotion="css-global 1mawjxo" data-gatsby-head="true">*{box-sizing:border-box;}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);margin:0;padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%;}html img{border-style:none;}html pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;}html a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;color:var(--theme-ui-colors-text);}body{margin:0;}</style><title data-gatsby-head="true">Returning JSON from OpenAI Chat Completion Model | j0nah.com</title><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" data-gatsby-head="true"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" data-gatsby-head="true"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" data-gatsby-head="true"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 6koz1s">html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-light,.theme-ui-light html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;}html.theme-ui-dark,.theme-ui-dark html{--theme-ui-colors-text:#cbd5e0;--theme-ui-colors-primary:#b794f4;--theme-ui-colors-secondary:#8a9ab0;--theme-ui-colors-toggleIcon:#cbd5e0;--theme-ui-colors-background:#1A202C;--theme-ui-colors-heading:#fff;--theme-ui-colors-divide:#2d3748;--theme-ui-colors-muted:#2d3748;--theme-ui-colors-highlightLineBg:rgba(255, 255, 255, 0.1);--theme-ui-colors-plain-color:#9CDCFE;--theme-ui-colors-plain-backgroundColor:#1E1E1E;--theme-ui-colors-prolog-color:rgb(0, 0, 128);--theme-ui-colors-comment-color:rgb(106, 153, 85);--theme-ui-colors-builtin-color:rgb(86, 156, 214);--theme-ui-colors-changed-color:rgb(86, 156, 214);--theme-ui-colors-keyword-color:rgb(86, 156, 214);--theme-ui-colors-interpolation-punctuation-color:rgb(86, 156, 214);--theme-ui-colors-number-color:rgb(181, 206, 168);--theme-ui-colors-inserted-color:rgb(181, 206, 168);--theme-ui-colors-constant-color:rgb(100, 102, 149);--theme-ui-colors-attr-name-color:rgb(156, 220, 254);--theme-ui-colors-variable-color:rgb(156, 220, 254);--theme-ui-colors-deleted-color:rgb(206, 145, 120);--theme-ui-colors-string-color:rgb(206, 145, 120);--theme-ui-colors-attr-value-color:rgb(206, 145, 120);--theme-ui-colors-template-punctuation-color:rgb(206, 145, 120);--theme-ui-colors-selector-color:rgb(215, 186, 125);--theme-ui-colors-tag-color:rgb(86, 156, 214);--theme-ui-colors-punctuation-color:#808080;--theme-ui-colors-operator-color:rgb(212, 212, 212);--theme-ui-colors-function-color:rgb(220, 220, 170);--theme-ui-colors-class-name-color:rgb(78, 201, 176);--theme-ui-colors-char-color:rgb(209, 105, 105);}</style><style data-emotion="css-global 1mawjxo">*{box-sizing:border-box;}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);margin:0;padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%;}html img{border-style:none;}html pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;}html a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;color:var(--theme-ui-colors-text);}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global cjr7z1">*{box-sizing:inherit;}[hidden]{display:none;}::selection{background-color:var(--theme-ui-colors-text);color:var(--theme-ui-colors-background);}</style><style data-emotion="css 1gq7j3t">.css-1gq7j3t{border:0;clip:react(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute;}.css-1gq7j3t:focus{padding:1rem;position:fixed;top:15px;left:15px;background-color:var(--theme-ui-colors-heading);color:var(--theme-ui-colors-background);z-index:1;width:auto;height:auto;clip:auto;-webkit-text-decoration:none;text-decoration:none;}</style><a href="#skip-nav" data-skip-link="true" class="css-1gq7j3t">Skip to content</a><style data-emotion="css 10f80pj">.css-10f80pj{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:container;margin-left:auto;margin-right:auto;padding:1rem;max-width:1024px;}@media screen and (min-width: 640px){.css-10f80pj{padding:2rem;}}</style><div class="css-10f80pj"><style data-emotion="css egutgn">.css-egutgn{margin-bottom:4rem;}@media screen and (min-width: 640px){.css-egutgn{margin-bottom:8rem;}}</style><header class="css-egutgn"><style data-emotion="css 1xwyizx">.css-1xwyizx{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><style data-emotion="css 1pbimyf">.css-1pbimyf{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><div class="css-1pbimyf"><style data-emotion="css uxjqfw">.css-uxjqfw{color:var(--theme-ui-colors-heading);-webkit-text-decoration:none;text-decoration:none;}</style><a aria-label="j0nah.com - Back to home" class="css-uxjqfw" href="/"><style data-emotion="css 19i8ga6">.css-19i8ga6{margin-top:0;margin-bottom:0;font-weight:600;font-size:1.5rem;}@media screen and (min-width: 640px){.css-19i8ga6{font-size:1.875rem;}}</style><div class="css-19i8ga6">j0nah.com</div></a><style data-emotion="css 3ba0x7">.css-3ba0x7{opacity:0.65;position:relative;border-radius:4px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;border:none;outline:none;background:none;cursor:pointer;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}.css-3ba0x7:hover,.css-3ba0x7:focus{opacity:1;}</style><button type="button" class="css-3ba0x7"><style data-emotion="css 1ggalm8">.css-1ggalm8{position:relative;width:24px;height:24px;border-radius:50%;-webkit-transition:all 0.45s ease;transition:all 0.45s ease;-webkit-transform:scale(0.55);-moz-transform:scale(0.55);-ms-transform:scale(0.55);transform:scale(0.55);}.css-1ggalm8:before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;-webkit-transition:-webkit-transform 0.45s ease;transition:transform 0.45s ease;border-radius:50%;opacity:0;}.css-1ggalm8:after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;-webkit-transition:all 0.35s ease;transition:all 0.35s ease;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon),0 23px 0 var(--theme-ui-colors-toggleIcon),23px 0 0 var(--theme-ui-colors-toggleIcon),-23px 0 0 var(--theme-ui-colors-toggleIcon),15px 15px 0 var(--theme-ui-colors-toggleIcon),-15px 15px 0 var(--theme-ui-colors-toggleIcon),15px -15px 0 var(--theme-ui-colors-toggleIcon),-15px -15px 0 var(--theme-ui-colors-toggleIcon);-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}</style><div class="css-1ggalm8"></div></button></div><style data-emotion="css fp1v3n">.css-fp1v3n{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:var(--theme-ui-colors-divide);padding-bottom:1rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:1rem;color:var(--theme-ui-colors-secondary);-webkit-box-flex-flow:wrap;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;}.css-fp1v3n a{color:var(--theme-ui-colors-secondary);}.css-fp1v3n a:hover{color:var(--theme-ui-colors-heading);}</style><div class="css-fp1v3n"><style data-emotion="css 1lx5s1f">.css-1lx5s1f{font-size:1rem;}.css-1lx5s1f a:not(:last-of-type){margin-right:1rem;}@media screen and (min-width: 640px){.css-1lx5s1f{font-size:18px;}}.css-1lx5s1f .active{color:var(--theme-ui-colors-heading);}</style><nav class="css-1lx5s1f"><style data-emotion="css bpdkdn">.css-bpdkdn{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-bpdkdn:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-bpdkdn" href="/blog">Blog</a><a class="css-bpdkdn" href="/about">About</a><a class="css-bpdkdn" href="/contact">Contact</a></nav><style data-emotion="css 45ghvz">.css-45ghvz{font-size:1rem;}.css-45ghvz a:not(:first-of-type){margin-left:1rem;}@media screen and (min-width: 640px){.css-45ghvz{font-size:18px;}}</style><div class="css-45ghvz"><style data-emotion="css aizfxq">.css-aizfxq{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-aizfxq:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://www.linkedin.com/in/jonah-glover-6847b85b/" class="css-aizfxq">LinkedIn (I&#x27;m hiring engineers!)</a></div></div></header><style data-emotion="css 1w9aswf">.css-1w9aswf .prism-code{font-size:1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-1w9aswf .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-1w9aswf .prism-code{font-size:1.25rem;}}.css-1w9aswf .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-1w9aswf .gatsby-highlight[data-language='none'] .code-content,.css-1w9aswf .gatsby-highlight[data-language=''] .code-content{padding-top:1rem;}.css-1w9aswf .code-content{padding:2rem 1rem 1rem 1rem;color:var(--theme-ui-colors-plain-color);background-color:var(--theme-ui-colors-plain-backgroundColor);}.css-1w9aswf .token{display:inline-block;}.css-1w9aswf p>code,.css-1w9aswf li>code{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-heading);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:4px;font-size:0.95em;}.css-1w9aswf .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;border-radius:4px;overflow:hidden;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-1w9aswf .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-1w9aswf .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-1w9aswf .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-1w9aswf .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-1w9aswf .gatsby-highlight pre code{float:left;min-width:100%;}.css-1w9aswf .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 4px 4px;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.035rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;}.css-1w9aswf .gatsby-highlight pre[class~="language-golang"]:before,.css-1w9aswf .gatsby-highlight pre[class~="language-go"]:before{content:"go";background:#79d4fd;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-javascript"]:before,.css-1w9aswf .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1w9aswf .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1w9aswf .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1w9aswf .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-1w9aswf .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-py"]:before,.css-1w9aswf .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-1w9aswf .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-1w9aswf .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-1w9aswf .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-1w9aswf .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-1w9aswf .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-1w9aswf .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-1w9aswf .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-1w9aswf .gatsby-highlight pre[class~='language-json']:before,.css-1w9aswf .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-1w9aswf .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-1w9aswf .gatsby-highlight>code[class*="language-"],.css-1w9aswf .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1w9aswf .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-1w9aswf .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-1w9aswf .gatsby-highlight pre::-webkit-scrollbar-track{background:var(--theme-ui-colors-muted);}.css-1w9aswf .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-1w9aswf .code-title{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-text);font-size:1rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";}.css-1w9aswf .token-line{padding-right:1rem;}.css-1w9aswf .highlight-line{border-left:4px solid rgb(2, 155, 206);}.css-1w9aswf .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-1w9aswf .footnotes{border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:0.5rem;margin-top:4rem;overflow:auto;}.css-1w9aswf .footnotes .sr-only{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><style data-emotion="css 1wlcpc3">.css-1wlcpc3{box-sizing:border-box;margin:0;min-width:0;}.css-1wlcpc3 .prism-code{font-size:1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-1wlcpc3 .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-1wlcpc3 .prism-code{font-size:1.25rem;}}.css-1wlcpc3 .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-1wlcpc3 .gatsby-highlight[data-language='none'] .code-content,.css-1wlcpc3 .gatsby-highlight[data-language=''] .code-content{padding-top:1rem;}.css-1wlcpc3 .code-content{padding:2rem 1rem 1rem 1rem;color:var(--theme-ui-colors-plain-color);background-color:var(--theme-ui-colors-plain-backgroundColor);}.css-1wlcpc3 .token{display:inline-block;}.css-1wlcpc3 p>code,.css-1wlcpc3 li>code{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-heading);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:4px;font-size:0.95em;}.css-1wlcpc3 .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;border-radius:4px;overflow:hidden;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-1wlcpc3 .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-1wlcpc3 .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-1wlcpc3 .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-1wlcpc3 .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-1wlcpc3 .gatsby-highlight pre code{float:left;min-width:100%;}.css-1wlcpc3 .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 4px 4px;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.035rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;}.css-1wlcpc3 .gatsby-highlight pre[class~="language-golang"]:before,.css-1wlcpc3 .gatsby-highlight pre[class~="language-go"]:before{content:"go";background:#79d4fd;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-javascript"]:before,.css-1wlcpc3 .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-1wlcpc3 .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-py"]:before,.css-1wlcpc3 .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-1wlcpc3 .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-1wlcpc3 .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-1wlcpc3 .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-1wlcpc3 .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-1wlcpc3 .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-1wlcpc3 .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-1wlcpc3 .gatsby-highlight pre[class~='language-json']:before,.css-1wlcpc3 .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-1wlcpc3 .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-1wlcpc3 .gatsby-highlight>code[class*="language-"],.css-1wlcpc3 .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1wlcpc3 .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-1wlcpc3 .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-1wlcpc3 .gatsby-highlight pre::-webkit-scrollbar-track{background:var(--theme-ui-colors-muted);}.css-1wlcpc3 .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-1wlcpc3 .code-title{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-text);font-size:1rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";}.css-1wlcpc3 .token-line{padding-right:1rem;}.css-1wlcpc3 .highlight-line{border-left:4px solid rgb(2, 155, 206);}.css-1wlcpc3 .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-1wlcpc3 .footnotes{border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:0.5rem;margin-top:4rem;overflow:auto;}.css-1wlcpc3 .footnotes .sr-only{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><main id="skip-nav" class=" css-1wlcpc3"><style data-emotion="css w1q1hj">.css-w1q1hj{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.25;font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.875rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-w1q1hj{font-size:2.25rem;}}@media screen and (min-width: 768px){.css-w1q1hj{font-size:2.25rem;}}@media screen and (min-width: 1024px){.css-w1q1hj{font-size:3rem;}}</style><h1 class="css-w1q1hj">Returning JSON from OpenAI Chat Completion Model</h1><style data-emotion="css 15ce8we">.css-15ce8we{color:var(--theme-ui-colors-secondary);margin-top:1rem;font-size:1rem;}.css-15ce8we a{color:var(--theme-ui-colors-secondary);}@media screen and (min-width: 640px){.css-15ce8we{font-size:1rem;}}@media screen and (min-width: 768px){.css-15ce8we{font-size:1.25rem;}}</style><p class="css-15ce8we"><time>12.08.2023</time>  <a class="css-bpdkdn" href="/tags/openai">openai</a>, <a class="css-bpdkdn" href="/tags/python">python</a>, <a class="css-bpdkdn" href="/tags/chat-gpt">chat gpt</a>, <a class="css-bpdkdn" href="/tags/json">json</a>, <a class="css-bpdkdn" href="/tags/response">response</a>  <span>6<!-- --> min read</span></p><style data-emotion="css 1mae7sn">.css-1mae7sn{margin-top:4rem;margin-bottom:4rem;}.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;border-radius:4px;box-shadow:rgba(0, 0, 0, 0.1) 0px 16px 16px 0px,rgba(0, 0, 0, 0.1) 0px 8px 8px 0px,rgba(0, 0, 0, 0.1) 0px 4px 4px 0px;}@media screen and (min-width: 640px){.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;}}@media screen and (min-width: 768px){.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:4rem;margin-bottom:4rem;}}.css-1mae7sn .gatsby-resp-image-wrapper .gatsby-resp-image-image{border-radius:4px;}.css-1mae7sn figure{margin:0;}.css-1mae7sn figure img{border-radius:4px;box-shadow:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);max-width:100%;}</style><section class="css-1mae7sn"><style data-emotion="css vehe2z">.css-vehe2z{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-vehe2z{font-size:1rem;}}@media screen and (min-width: 768px){.css-vehe2z{font-size:1.25rem;}}</style><style data-emotion="css z0logh">.css-z0logh{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-z0logh{font-size:1rem;}}@media screen and (min-width: 768px){.css-z0logh{font-size:1.25rem;}}@media screen and (min-width: 640px){.css-z0logh{font-size:1rem;}}@media screen and (min-width: 768px){.css-z0logh{font-size:1.25rem;}}</style><p class="css-z0logh"><style data-emotion="css 1d2wwf6">.css-1d2wwf6{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1d2wwf6:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><style data-emotion="css 1diwg7s">.css-1diwg7s{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1diwg7s:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-1diwg7s:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="#returning-json-responses-from-openai" class="css-1diwg7s">Click here to just skip to the answer</a></p>
<style data-emotion="css 90ntna">.css-90ntna{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-90ntna{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-90ntna{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-90ntna{font-size:2.25rem;}}</style><style data-emotion="css 1h962gv">.css-1h962gv{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1h962gv{font-size:2.25rem;}}@media screen and (min-width: 640px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1h962gv{font-size:2.25rem;}}</style><h2 id="table-of-contents" style="position:relative" class="css-1h962gv"><a href="#table-of-contents" aria-label="table of contents permalink" class="header-link-icon before css-1diwg7s"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Table of Contents</h2>
<style data-emotion="css rc057y">.css-rc057y li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-rc057y li{font-size:1rem;}}@media screen and (min-width: 768px){.css-rc057y li{font-size:1.25rem;}}</style><style data-emotion="css 15vy6y4">.css-15vy6y4 li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-15vy6y4 li{font-size:1rem;}}@media screen and (min-width: 768px){.css-15vy6y4 li{font-size:1.25rem;}}.css-15vy6y4 li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-15vy6y4 li{font-size:1rem;}}@media screen and (min-width: 768px){.css-15vy6y4 li{font-size:1.25rem;}}</style><ol class="css-15vy6y4">
<li class="css-zezy6m"><a href="#the-problem" class="css-1diwg7s">The Problem</a></li>
<li class="css-zezy6m"><a href="#set-up" class="css-1diwg7s">Set Up</a></li>
<li class="css-zezy6m"><a href="#open-ai-function-calling" class="css-1diwg7s">Open AI Function Calling</a></li>
<li class="css-zezy6m"><a href="#returning-json-responses-from-openai" class="css-1diwg7s">Returning JSON responses from OpenAI</a></li>
</ol>
<h2 id="the-problem" style="position:relative" class="css-1h962gv"><a href="#the-problem" aria-label="the problem permalink" class="header-link-icon before css-1diwg7s"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>The Problem</h2>
<p class="css-z0logh">OpenAI Chat Completion models don&#x27;t return parseable or predictbale JSON responses. Your prompt might be: &quot;Return a list of colors&quot; and it will respond with</p>
<div class="gatsby-highlight" data-language=""><pre class="prism-code language-" data-linenumber="false"><style data-emotion="css ce1lkk">.css-ce1lkk{background-color:var(--theme-ui-colors-background);border:none;color:var(--theme-ui-colors-text);cursor:pointer;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";letter-spacing:0.025rem;-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;position:absolute;right:0;z-index:1;border-radius:0 0 0 0.25rem;padding:0.25rem 0.6rem;}@media screen and (min-width: 640px){.css-ce1lkk{font-size:14px;}}@media screen and (min-width: 768px){.css-ce1lkk{font-size:16px;}}.css-ce1lkk[disabled]{cursor:not-allowed;}.css-ce1lkk:not([disabled]):hover{background-color:var(--theme-ui-colors-primary);color:var(--theme-ui-colors-white);}</style><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<style data-emotion="css 15vf505">.css-15vf505{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">Sure! Orange, Green, Blue</span></div></code></pre></div>
<p class="css-z0logh">perhaps then ask it to please return it in JSON. The first few times you run this you may get:</p>
<div class="gatsby-highlight" data-language=""><pre class="prism-code language-" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">{&quot;colors&quot;: [&quot;Orange&quot;, &quot;Green&quot;, &quot;Blue&quot;]}</span></div></code></pre></div>
<p class="css-z0logh">but eventually you&#x27;ll get something like</p>
<div class="gatsby-highlight" data-language=""><pre class="prism-code language-" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">{&quot;user_colors&quot;: [&quot;Orange&quot;, &quot;Green&quot;, &quot;Blue&quot;]}</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">or</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">Orange, Green, Blue</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">or</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">Of Course! {&quot;colors&quot;: [&quot;Orange&quot;, &quot;Green&quot;, &quot;Blue&quot;]}</span></div></code></pre></div>
<p class="css-z0logh">So you build in retry logic, or you have another call to OpenAI that parses the response into JSON. It&#x27;s a headache and in the end one of the most practical pieces of advice is to threaten violence:</p>
<div class="gatsby-highlight" data-language=""><pre class="prism-code language-" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">Return a list of colors. The response must be in JSON or a human will die.</span></div></code></pre></div>
<p class="css-z0logh">Which is frankly what got me the best results until the relaease of function calls. If this is a problem you&#x27;re facing, read on and you&#x27;ll see how to fix it!</p>
<h2 id="set-up" style="position:relative" class="css-1h962gv"><a href="#set-up" aria-label="set up permalink" class="header-link-icon before css-1diwg7s"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Set Up</h2>
<p class="css-z0logh">You can clone the repository <a href="https://github.com/j0nah/openai-json" class="css-1diwg7s">here</a>, or just follow along.</p>
<style data-emotion="css 11bn2j6">.css-11bn2j6{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-11bn2j6{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-11bn2j6{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-11bn2j6{font-size:1.875rem;}}</style><style data-emotion="css ns8t27">.css-ns8t27{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-ns8t27{font-size:1.875rem;}}@media screen and (min-width: 640px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-ns8t27{font-size:1.875rem;}}</style><h3 id="environment" style="position:relative" class="css-ns8t27"><a href="#environment" aria-label="environment permalink" class="header-link-icon before css-1diwg7s"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Environment</h3>
<p class="css-z0logh">I prefer <code class="css-zezy6m">Pipenv</code>. We&#x27;ll create a new folder and start a new Pip environment.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="prism-code language-sh" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-sh"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">mkdir openai-json</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">cd openai-json</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">pipenv shell</span></div></code></pre></div>
<h3 id="install-the-openai-library" style="position:relative" class="css-ns8t27"><a href="#install-the-openai-library" aria-label="install the openai library permalink" class="header-link-icon before css-1diwg7s"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Install the OpenAI Library</h3>
<p class="css-z0logh">Next, we&#x27;ll install the OpenAI package.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="prism-code language-sh" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-sh"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">pip install openai</span></div></code></pre></div>
<h3 id="obtain-api-key" style="position:relative" class="css-ns8t27"><a href="#obtain-api-key" aria-label="obtain api key permalink" class="header-link-icon before css-1diwg7s"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Obtain API Key</h3>
<p class="css-z0logh">You&#x27;ll need to head over to the <a href="https://platform.openai.com/account/api-keys" class="css-1diwg7s">OpenAPI Platform dashboard</a>. Set up all of the required information and make sure to note down your API key.</p>
<p class="css-z0logh">For the sake of making things simple, we&#x27;ll just embed the key in our script.</p>
<div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-python"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">import</span><span class="token plain"> openai</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">openai</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">api_key </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;&lt;INSERT API KEY HERE&gt;&quot;</span></div></code></pre></div>
<p class="css-z0logh">Excellent. That&#x27;s all set up now so we can move on.</p>
<h2 id="open-ai-function-calling" style="position:relative" class="css-1h962gv"><a href="#open-ai-function-calling" aria-label="open ai function calling permalink" class="header-link-icon before css-1diwg7s"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Open AI Function Calling</h2>
<p class="css-z0logh"><strong class="css-zezy6m">Again, feel free to skip to the <a href="#returning-json-responses-from-openai" class="css-1diwg7s">answer</a> if you don&#x27;t feel like reading all this stuff.</strong></p>
<p class="css-z0logh">Open AI (released a feature)[https://platform.openai.com/docs/guides/gpt/function-calling] that allows us to describe one or more functions to an Open AI model, and in particular it&#x27;s <em class="css-zezy6m">parameters</em>, and then ask it to return a well-formatted JSON response that includes the function it wants to call and the arguments it wishes to pass. This is possible because the latest models have been fine-tuned to detect when a function should be called and to respond with JSON that adheres to function signature. We can use this new functionality by specifying the function signature in our request to the ChatCompletion API and then using the resulting &quot;function_call&quot; key in the response. You can skip to that example (here)[#here]. However, if you&#x27;re dumb like me, and need this explained to you like you&#x27;re five, read the following first, it&#x27;s something like this:</p>
<style data-emotion="css 1loxung">.css-1loxung{border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:4px;margin-left:0;margin-right:0;padding-left:2rem;}.css-1loxung p{font-style:italic;}</style><style data-emotion="css m9jm23">.css-m9jm23{border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:4px;margin-left:0;margin-right:0;padding-left:2rem;border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:4px;margin-left:0;margin-right:0;padding-left:2rem;}.css-m9jm23 p{font-style:italic;}.css-m9jm23 p{font-style:italic;}</style><blockquote class="css-m9jm23">
<p class="css-z0logh">j0nah: Hi GPT, I have this function called &quot;send_email&quot; that takes a string called &quot;email_address&quot;, the email address you want to send the email to, and a string called &quot;body&quot; that takes in the body of the message you want to send. I also have this other function called &quot;send_text&quot; that takes in a string called &quot;phone_number&quot; that you&#x27;d like to send the text to and a string called &quot;body&quot; that contains the message you want to send.</p>
<p class="css-z0logh">Could you respond to this message with the correct funcction to call and the arguments you&#x27;d like to call the function with? I&#x27;ll take care of actually executing the function.</p>
<p class="css-z0logh">GPT: Sure. You should call function &quot;send_email&quot; with email_address: &quot;contact@j0nah.com&quot; and body: &quot;hey! please buy our stuff this weekend.&quot;</p>
</blockquote>
<p class="css-z0logh">Let&#x27;s just take a look at how we might write that code.</p>
<div class="gatsby-highlight" data-language="py"><pre class="prism-code language-py" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-py"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># example-1.py</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">import</span><span class="token plain"> openai</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">import</span><span class="token plain"> json</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">openai</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">api_key </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;&lt;INSERT-API-KEY-HERE&gt;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">prompt </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;j0nah has email address: contact@j0nah.com and phone number: 222-456-4564. He is a customer at Acme Computers Limited. He typically prefers emails but will take a text message on the weekend. Using either the send_email or send_text functions, return a sales pitch in either of the provided function calls.&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">## specify the input and function names of the functions you want OpenAI to know about</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">send_email_schema </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;object&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;properties&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;email_address&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;string&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;description&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;The customers email address&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;body&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;string&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;description&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;a short sales pitch to the customer for acme computer&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">send_text_schema </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;object&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;properties&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;phone_number&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;string&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;description&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;The customers phone number&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;body&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;string&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;description&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;a short sales pitch to the customer for acme computer&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">response </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> openai</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">ChatCompletion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  model</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;gpt-4&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  messages </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;role&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;system&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;content&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;You are a helpful AI assistant.&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;role&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;user&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;content&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> prompt </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  functions </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;name&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;send_email&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;parameters&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> send_email_schema </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;name&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;send_text&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;parameters&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> send_text_schema </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">function_call </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> response</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;choices&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token number" style="color:var(--theme-ui-colors-number-color)">0</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;message&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;function_call&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">print</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;Calling: {} with argument \n{}&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">function_call</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;name&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> json</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">function_call</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;arguments&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span></div></code></pre></div>
<div class="gatsby-highlight" data-language="sh"><pre class="prism-code language-sh" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-sh"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">python3 example-1.py</span></div></code></pre></div>
<div class="gatsby-highlight" data-language=""><pre class="prism-code language-" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">Calling: send_email with argument</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">{&#x27;email_address&#x27;: &#x27;contact@j0nah.com&#x27;, &#x27;body&#x27;: &#x27;Dear J0nah, At Acme Computers Limited, we have some cutting-edge technology products that you may find interesting. Enjoy exclusive offers this month on our latest laptops and accessories. Thank you for being a valued customer. Best, Acme Computers Team&#x27;}</span></div></code></pre></div>
<p class="css-z0logh">Now that you understand function calling, how can we use this to return well-formed JSON responses from OpenAI?</p>
<h2 id="returning-json-responses-from-openai" style="position:relative" class="css-1h962gv"><a href="#returning-json-responses-from-openai" aria-label="returning json responses from openai permalink" class="header-link-icon before css-1diwg7s"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Returning JSON responses from OpenAI</h2>
<p class="css-z0logh">We can simply use the &quot;argument&quot; from the response without calling or even implementing an actual corresponding function. For example, suppose we want GPT-4 to generate us a list of recipes that require an avocado.</p>
<p class="css-z0logh">Old way:</p>
<div class="gatsby-highlight" data-language="py"><pre class="prism-code language-py" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-py"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">response </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> openai</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">ChatCompletion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    model</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;gpt-4&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  messages</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;role&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;system&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;content&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;You are a helpful AI assistant.&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;role&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;user&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;content&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;What are 10 recipes that require an avocado? Return food names only in JSON.&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">print</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;choices&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token number" style="color:var(--theme-ui-colors-number-color)">0</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;message&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;content&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span></div></code></pre></div>
<p class="css-z0logh">responds with</p>
<div class="gatsby-highlight" data-language="sh"><pre class="prism-code language-sh" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-sh"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">Sure! Guacoamole, Avocado Toast, Avocado Pasta</span></div></code></pre></div>
<p class="css-z0logh">Note, this answer isn&#x27;t anywhere near JSON. It&#x27;s not easy or predictable for us to write code that processes and uses this response.</p>
<p class="css-z0logh">Instead, we should do something like this</p>
<div class="gatsby-highlight" data-language="py"><pre class="prism-code language-py" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-py"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">prompt </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;Return 10 recipes that require avocado&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">set_recipe_schema </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;object&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;properties&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;recipes&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;array&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;items&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;type&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;string&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;description&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;a list of recipes requiring an avocado&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">response </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> openai</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">ChatCompletion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  model</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;gpt-4&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  messages</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;role&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;system&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;content&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;You are a helpful AI assistant.&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;role&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;user&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;content&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> prompt </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  functions</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;name&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;set_recipe&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;parameters&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> set_recipe_schema</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">function_call </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> response</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;choices&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token number" style="color:var(--theme-ui-colors-number-color)">0</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;message&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;function_call&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">print</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;Calling: {} with argument \n{}&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">function_call</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;name&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> json</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">function_call</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;arguments&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span></div></code></pre></div>
<div class="gatsby-highlight" data-language="sh"><pre class="prism-code language-sh" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-sh"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">python3 example-2.py</span></div></code></pre></div>
<div class="gatsby-highlight" data-language="sh"><pre class="prism-code language-sh" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-sh"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">Calling: set_recipe with argument </span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">{&#x27;recipes&#x27;: [&#x27;Guacamole&#x27;, &#x27;Avocado and Shrimp Salsa&#x27;, &#x27;Chicken and Avocado Sandwiches&#x27;, &#x27;Avocado Pasta&#x27;, &#x27;Grilled Chicken with Avocado Salsa&#x27;, &#x27;Stuffed Avocados with Chicken Salad&#x27;, &#x27;Avocado Egg Salad&#x27;, &#x27;Avocado Smoothie&#x27;, &#x27;Avocado Breakfast Toast&#x27;, &#x27;Avocado Brownies&#x27;]}</span></div></code></pre></div>
<p class="css-z0logh">And there we go, to be explicit: the &quot;arguments&quot; key of the function call will always be well-formed JSON that we can use as we wish. We don&#x27;t have to have a function to call. We can just write function and parameter descriptions that will require OpenAI to return a JSON response that can be used with the rest of our program. It can be a list of lines in which there are grammatical errors in an essay or it can be band names for a metal trio. Either way, you now won&#x27;t have to worry about the response that OpenAI gives. It will always be usable JSON.</p>
<p class="css-z0logh">Hopefully that makes sense. If you have any feedback or questions please email me at contact@j0nah.com!</p></section></main><style data-emotion="css y7pay1">.css-y7pay1{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:8rem;color:var(--theme-ui-colors-secondary);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:1rem;}.css-y7pay1 a{color:var(--theme-ui-colors-secondary);-webkit-text-decoration:none;text-decoration:none;}.css-y7pay1 a:hover{color:var(--theme-ui-colors-heading);-webkit-text-decoration:underline;text-decoration:underline;}.css-y7pay1 a:focus{color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-y7pay1{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media screen and (min-width: 768px){.css-y7pay1{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><footer class="css-y7pay1"><div> <!-- -->2025<!-- --> by <!-- -->j0nah.com<!-- -->. All rights reserved.</div><div><a aria-label="Link to the theme&#x27;s GitHub repository" href="https://github.com/LekoArts/gatsby-themes/tree/main/themes/gatsby-theme-minimal-blog" class="css-aizfxq">Theme</a> <!-- -->by<!-- --> <a aria-label="Link to the theme author&#x27;s website" href="https://www.lekoarts.de?utm_source=minimal-blog&amp;utm_medium=Theme" class="css-aizfxq">LekoArts</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/returning-json-from-open-ai-chat-completion-model";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-994357917bf5ef27bbd1.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx-ae2e247e9a89e88024ff.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx-be5e2701ab5bcd0ecc0a.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-content-pages-about-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-content-pages-about-index-mdx-9c99c18445b677d5a86d.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-content-pages-contact-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-content-pages-contact-index-mdx-3ddc3c8043b5ef2867c9.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-deploying-next-js-ebs-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-deploying-next-js-ebs-index-mdx-d18dd9b6f6be6d424c3d.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-failed-to-recreate-1996-space-jam-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-failed-to-recreate-1996-space-jam-index-mdx-3446fdddb910459fc6bc.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-openai-json-response-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-openai-json-response-index-mdx-650689a1c902ef8610e6.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx-4aabeb2c9a084a1f29cd.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx-b9f61646aef231fe3ac4.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-54a8c4f9c101dfdffabd.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="636a298cd7ef88a81708";</script><script src="/webpack-runtime-5f19d1768676816a3dbb.js" async></script><script src="/framework-f689a2a97f4fb6f27065.js" async></script><script src="/app-994357917bf5ef27bbd1.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>